<div class="p-8">
  <div class="flex items-center justify-between">
    <div>
      <p class="text-xs font-medium text-gray-500">Resource</p>
      <h1 class="text-xl"><%= params[:resource] %></h1>
      <div class="mt-2 inline-flex py-1 px-3 rounded-full text-xs bg-white border"># <%= @resource.to_param %></div>
    </div>
    <%= button_to resource_path(resource: params[:resource]), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "py-2 px-6 inline-flex border rounded text-red-500 shadow-sm hover:bg-gray-50 text-sm font-medium" do %>
      Delete
    <% end %>
  </div>
</div>

<div class="pb-8">
  <div class="px-8">
    <h3 class="text-xl mb-8">Associations</h3>
    <div class="border-y divide-y -mx-8">
    <% @resource_associations.each do |association| %>
      <% associated_resources = @resource.send(association.name.to_sym) %>
      <% next if associated_resources.blank? %>
      <% associated_resources = [associated_resources] unless associated_resources.respond_to?(:each) %>

      <div class="px-8 py-6">
        <div class="inline-flex items-center gap-2 mb-4">
          <div class="inline-flex items-center justify-center h-6 w-6 bg-gray-50">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="h-4 w-4"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M6.5 17.5l5.5 -4.5l5.5 4.5" /><path d="M12 7l0 6" /></svg>
          </div>
          <%= association.name.to_s.titleize %>
        </div>

        <div class="flex gap-2 flex-wrap">
          <% associated_resources.each do |ar| %>
            <a href="<%= resource_path(ar.id, resource: ar.class) %>" class="inline-flex text-xs border border-transparent rounded-full bg-gray-100 hover:bg-gray-200 px-3 py-1.5"><%= ar.class %> - <%= ar.to_param %></a>
          <% end %>
        </div>
      </div>
    <% end %>
    </div>
  </div>
</div>

<div class="pb-8">
  <div class="px-8">
    <h3 class="text-xl mb-8">Attributes</h3>
    <div class="border-y divide-y -mx-8">
      <% @resource_class.columns_hash.each do |key, metadata| %>
        <%= render Oversee::Fields::DisplayRowComponent.new(key: key, resource: @resource, datatype: metadata.sql_type_metadata.type, value: @resource.send(key)) %>
      <% end %>
    </div>
  </div>
</div>
